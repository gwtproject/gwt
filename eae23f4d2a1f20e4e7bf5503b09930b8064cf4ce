{
  "comments": [
    {
      "key": {
        "uuid": "d45f8ebc_13296dec",
        "filename": "user/super/com/google/gwt/emul/java/io/IOUtils.java",
        "patchSetId": 3
      },
      "lineNbr": 74,
      "author": {
        "id": 5110
      },
      "writtenOn": "2020-04-13T21:45:54Z",
      "side": 1,
      "message": "not needed",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 74,
        "endChar": 22
      },
      "revId": "eae23f4d2a1f20e4e7bf5503b09930b8064cf4ce",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c337800_63859288",
        "filename": "user/super/com/google/gwt/emul/java/io/IOUtils.java",
        "patchSetId": 3
      },
      "lineNbr": 74,
      "author": {
        "id": 11389
      },
      "writtenOn": "2020-04-14T20:39:26Z",
      "side": 1,
      "message": "Removed. I replicated behaviour in other methods. IIUC is this null check not required for String as it is a Java class but required for native arrays as they are transpiled to native JS arrays? Or is it not required in other two methods as well?",
      "parentUuid": "d45f8ebc_13296dec",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 74,
        "endChar": 22
      },
      "revId": "eae23f4d2a1f20e4e7bf5503b09930b8064cf4ce",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17cdae5f_f7aed9a9",
        "filename": "user/super/com/google/gwt/emul/java/io/IOUtils.java",
        "patchSetId": 3
      },
      "lineNbr": 74,
      "author": {
        "id": 5110
      },
      "writtenOn": "2020-04-14T21:32:55Z",
      "side": 1,
      "message": "java.lang.String is actually same as JavaScript string with helper methods. Same is also true for arrays.\nHistorically, GWT was throwing JavaScriptException in \u0027null dereference\u0027 (e.g. abc.method() where abc is null) as it didn\u0027t understanding underlying JavaScript error type.\nSo on the some APIs in library side, in order make sure NPE is thrown they were doing an explicit check for null.\n\nWe fixed that for J2CL awhile back and IIRC we fixed it for GWT as well.\n\nYes you can drop that in others as well but please run the tests just in case.",
      "parentUuid": "4c337800_63859288",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 74,
        "endChar": 22
      },
      "revId": "eae23f4d2a1f20e4e7bf5503b09930b8064cf4ce",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "491b9735_a2c8f955",
        "filename": "user/super/com/google/gwt/emul/java/io/IOUtils.java",
        "patchSetId": 3
      },
      "lineNbr": 74,
      "author": {
        "id": 11389
      },
      "writtenOn": "2020-04-15T20:56:24Z",
      "side": 1,
      "message": "I tried removing the check from other 2 methods and ran smoke test[1]. The following test target [2] failed with the reason mentioned in the comment i.e. JavascriptException was being thrown. To verify that it doesn\u0027t break for string variant I added a test in WriterTest.java which attempts to write a null string object and expects a NullPointerException. However this test passes. I\u0027ve following 3 questions based on this observation:\n\n1. Is it possible that the fix made for J2CL (the one you were talking about), fixed things just for string but not for primitive arrays?\n2. Is something wrong with the writer implementation or the test itself?\n3. (Worst case) Is it possible that the tests added as part of this patch are just built but not run while executing smoke test target. [1] I believe all test files are automatically picked up and run.\n\n[1] third_party/java_src/gwt:smoke\n[2] third_party/java_src/gwt:draft.htmlunit_emultest.EmulSuite",
      "parentUuid": "17cdae5f_f7aed9a9",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 74,
        "endChar": 22
      },
      "revId": "eae23f4d2a1f20e4e7bf5503b09930b8064cf4ce",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fdb386a8_31962c8e",
        "filename": "user/super/com/google/gwt/emul/java/io/IOUtils.java",
        "patchSetId": 3
      },
      "lineNbr": 74,
      "author": {
        "id": 5110
      },
      "writtenOn": "2020-04-16T03:21:27Z",
      "side": 1,
      "message": "It means we didn\u0027t fix this for GWT but only J2CL. You can add back checkNotNull to keep GWT happy.\n\nAlso you need to update user/test/com/google/gwt/emultest/EmulSuite.java to include your new tests.",
      "parentUuid": "491b9735_a2c8f955",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 74,
        "endChar": 22
      },
      "revId": "eae23f4d2a1f20e4e7bf5503b09930b8064cf4ce",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34b40362_64566bd8",
        "filename": "user/super/com/google/gwt/emul/java/io/OutputStreamWriter.java",
        "patchSetId": 3
      },
      "lineNbr": 55,
      "author": {
        "id": 5110
      },
      "writtenOn": "2020-04-13T21:45:54Z",
      "side": 1,
      "message": "this.charset (to be consistent within method)",
      "range": {
        "startLine": 55,
        "startChar": 4,
        "endLine": 55,
        "endChar": 11
      },
      "revId": "eae23f4d2a1f20e4e7bf5503b09930b8064cf4ce",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1efb0a7_f9822afd",
        "filename": "user/super/com/google/gwt/emul/java/io/OutputStreamWriter.java",
        "patchSetId": 3
      },
      "lineNbr": 55,
      "author": {
        "id": 11389
      },
      "writtenOn": "2020-04-14T20:39:26Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "34b40362_64566bd8",
      "range": {
        "startLine": 55,
        "startChar": 4,
        "endLine": 55,
        "endChar": 11
      },
      "revId": "eae23f4d2a1f20e4e7bf5503b09930b8064cf4ce",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "06c9b489_66a7cf33",
        "filename": "user/super/com/google/gwt/emul/java/io/Writer.java",
        "patchSetId": 3
      },
      "lineNbr": 97,
      "author": {
        "id": 5110
      },
      "writtenOn": "2020-04-13T21:45:54Z",
      "side": 1,
      "message": "Do you have extra spaces here?",
      "range": {
        "startLine": 95,
        "startChar": 7,
        "endLine": 97,
        "endChar": 26
      },
      "revId": "eae23f4d2a1f20e4e7bf5503b09930b8064cf4ce",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3486d376_b794887d",
        "filename": "user/super/com/google/gwt/emul/java/io/Writer.java",
        "patchSetId": 3
      },
      "lineNbr": 97,
      "author": {
        "id": 11389
      },
      "writtenOn": "2020-04-14T20:39:26Z",
      "side": 1,
      "message": "Removed.",
      "parentUuid": "06c9b489_66a7cf33",
      "range": {
        "startLine": 95,
        "startChar": 7,
        "endLine": 97,
        "endChar": 26
      },
      "revId": "eae23f4d2a1f20e4e7bf5503b09930b8064cf4ce",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c0f75de3_306d8f28",
        "filename": "user/super/com/google/gwt/emul/java/io/Writer.java",
        "patchSetId": 3
      },
      "lineNbr": 177,
      "author": {
        "id": 5110
      },
      "writtenOn": "2020-04-13T21:45:54Z",
      "side": 1,
      "message": "in this particular case toString is not useful since you need to handle null specifically with index checking.",
      "range": {
        "startLine": 177,
        "startChar": 10,
        "endLine": 177,
        "endChar": 26
      },
      "revId": "eae23f4d2a1f20e4e7bf5503b09930b8064cf4ce",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0558c0b8_749d1dfd",
        "filename": "user/super/com/google/gwt/emul/java/io/Writer.java",
        "patchSetId": 3
      },
      "lineNbr": 177,
      "author": {
        "id": 11389
      },
      "writtenOn": "2020-04-14T20:39:26Z",
      "side": 1,
      "message": "Ah! I see. Reverting to original.",
      "parentUuid": "c0f75de3_306d8f28",
      "range": {
        "startLine": 177,
        "startChar": 10,
        "endLine": 177,
        "endChar": 26
      },
      "revId": "eae23f4d2a1f20e4e7bf5503b09930b8064cf4ce",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    }
  ]
}