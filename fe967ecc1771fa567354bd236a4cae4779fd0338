{
  "comments": [
    {
      "key": {
        "uuid": "VA6L7oGA",
        "filename": "user/src/com/google/gwt/user/client/rpc/impl/AbstractSerializationStream.java",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 5010
      },
      "writtenOn": "2013-05-24T19:07:08Z",
      "side": 1,
      "message": "update comment",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "VDJazTII",
        "filename": "user/src/com/google/gwt/user/client/rpc/impl/AbstractSerializationStreamWriter.java",
        "patchSetId": 4
      },
      "lineNbr": 92,
      "author": {
        "id": 5030
      },
      "writtenOn": "2013-05-24T11:20:40Z",
      "side": 1,
      "message": "if (getVersion() \u003e 7 \u0026\u0026 (Double.isNaN(fieldValue) || Double.isInfinite(fieldValue))\n\n(except with a the \u00277\u0027 replaced by a constant in AbstractSerializationStream)",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "VDHZfkFk",
        "filename": "user/src/com/google/gwt/user/client/rpc/impl/ClientSerializationStreamWriter.java",
        "patchSetId": 4
      },
      "lineNbr": 191,
      "author": {
        "id": 5030
      },
      "writtenOn": "2013-05-24T11:20:40Z",
      "side": 1,
      "message": "Use a constant instead of \u00277\u0027 (see comment on AbstractSerializationStreamWriter too)",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "VAwJSTJU",
        "filename": "user/src/com/google/gwt/user/client/rpc/impl/ClientSerializationStreamWriter.java",
        "patchSetId": 4
      },
      "lineNbr": 191,
      "author": {
        "id": 5010
      },
      "writtenOn": "2013-05-24T19:07:08Z",
      "side": 1,
      "message": "Maybe extract a \"chooseClientVersion()\" method?",
      "parentUuid": "VDHZfkFk",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "VA.IL6Gs",
        "filename": "user/src/com/google/gwt/user/server/rpc/RPC.java",
        "patchSetId": 4
      },
      "lineNbr": 381,
      "author": {
        "id": 5010
      },
      "writtenOn": "2013-05-24T19:07:08Z",
      "side": 1,
      "message": "This is tricky. Seems like there are four choices:\n\n(1) If we bump the version to 8 here then all clients need to immediately support version 8 for decoding responses. (That includes IE6/7 since we haven\u0027t dropped them quite yet.)\n\n(2) Leave it leave it at 7, so we don\u0027t need to worry about getting version 8 to work in old browsers. But that means new browsers need to handle both version 7 and version 8 responses.\n\n(3) I was hoping that each permutation would only need to support one version. To do that, responses should always use the version sent in the request, as you\u0027ve started on, but we would also need to choose the correct version for sending failures. In that case I\u0027d deprecate this method and force the callers to make the decision. (But we\u0027re still faced with choosing a version for the deprecated method.)\n\n(4) Wait to commit this change until we\u0027ve actually dropped IE6/7.",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "VDHwtMbE",
        "filename": "user/src/com/google/gwt/user/server/rpc/RPC.java",
        "patchSetId": 4
      },
      "lineNbr": 381,
      "author": {
        "id": 5030
      },
      "writtenOn": "2013-05-24T21:25:34Z",
      "side": 1,
      "message": "Which I\u0027d summarize as / reduce to:\n\n* we bump to 8 but then we wait until we actually dropped IE6/7 (which we\u0027re currently deciding)\n* we support both 7 and 8, with IE6/7 continuing using version 7 and all other browsers use version 8; the server-side responds with the same version that was used in the request. I agree that using permutations rather than a dynamic switch would make the code clearer/cleaner. That doesn\u0027t solve the problem re. those encodeResponseForFailure/Success methods though; and we\u0027d introduce them only for a short transition period: they wouldn\u0027t be needed as soon as we remove support for IE6/7 (and thus the need to support version 7 of the protocol in parallel to version 8). If the transition period ends before the next GWT release, then I\u0027m OK to make that change, otherwise I wouldn\u0027t like making such a change.",
      "parentUuid": "VA.IL6Gs",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "VA8KdhPs",
        "filename": "user/src/com/google/gwt/user/server/rpc/RPC.java",
        "patchSetId": 4
      },
      "lineNbr": 455,
      "author": {
        "id": 5010
      },
      "writtenOn": "2013-05-24T19:07:08Z",
      "side": 1,
      "message": "Similar version issues apply here, except that you\u0027ve already fixed it for the success case. I think we should deprecate this method. We should choose the same version here as in encodeResponseForFailure (use the same constant).",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "VDJY.rOA",
        "filename": "user/src/com/google/gwt/user/server/rpc/impl/ServerSerializationStreamWriter.java",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5030
      },
      "writtenOn": "2013-05-24T11:20:40Z",
      "side": 1,
      "message": "Depending on the version, this class should decide whether to use LengthConstrainedArray (the .concat hack) or not (or tweak its behavior to enable/disable the .concat hack)\n\nThat way, we can decide on the client-side whether to use eval() or JSON.parse and be sure that in the JSON.parse case (version 8) we should have valid JSON as input.",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "VDDZZGHI",
        "filename": "user/src/com/google/gwt/user/server/rpc/impl/ServerSerializationStreamWriter.java",
        "patchSetId": 4
      },
      "lineNbr": 636,
      "author": {
        "id": 5030
      },
      "writtenOn": "2013-05-24T11:20:40Z",
      "side": 1,
      "message": "Should be done in AbstractSerializationStreamWriter (see comment there)",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "VAyLVUA4",
        "filename": "user/src/com/google/gwt/user/server/rpc/impl/ServerSerializationStreamWriter.java",
        "patchSetId": 4
      },
      "lineNbr": 636,
      "author": {
        "id": 5000
      },
      "writtenOn": "2013-05-24T16:42:44Z",
      "side": 1,
      "message": "Also, I think the comparison is backwards?  Shouldn\u0027t we be writing the stringified value on getVersion() \u003e\u003d 8?",
      "parentUuid": "VDDZZGHI",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "VDDYn2NM",
        "filename": "user/super/com/google/gwt/user/translatable/com/google/gwt/user/client/rpc/impl/ClientSerializationStreamReader.java",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 5030
      },
      "writtenOn": "2013-05-24T11:20:40Z",
      "side": 1,
      "message": "Formatting (spaces):\n\n if•(version \u003c 8)•{\n\nand use a constant instead of a \"magic number\".",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "VDBYs3LE",
        "filename": "user/super/com/google/gwt/user/translatable/com/google/gwt/user/client/rpc/impl/ClientSerializationStreamReader.java",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 5030
      },
      "writtenOn": "2013-05-24T11:20:40Z",
      "side": 1,
      "message": "Versions prior to 8 use JavaScript, not JSON.",
      "revId": "fe967ecc1771fa567354bd236a4cae4779fd0338",
      "serverId": "84fdd5b9-d3fc-3149-9ae9-e619898c4c46",
      "unresolved": false
    }
  ]
}